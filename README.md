# 간단한 데이터베이스 시스템

이 프로젝트는 Java로 구현된 간단한 데이터베이스 시스템입니다. 직접 실습을 통해 기본적인 데이터베이스 개념을 보여줍니다. 이 시스템은 블록 기반 I/O 작업을 사용하여 텍스트 파일에 저장된 레코드를 관리합니다. 또한 특정 작업 및 데이터 저장을 위해 MySQL 데이터베이스와 상호 작용하여 하이브리드 데이터 관리 방식을 선보입니다.

이 프로젝트의 주요 목적은 다음과 같은 핵심 데이터베이스 기능을 구현하고 설명하는 것입니다:

*   **순차 파일 구성:** 순차적으로 구성된 파일의 데이터 관리.
*   **레코드 관리:** 레코드 생성, 읽기, 업데이트, 삭제와 같은 작업.
*   **검색 작업:** 특정 레코드를 검색하기 위한 검색 기능 구현.
*   **조인 작업:** 텍스트 파일 및 MySQL 데이터베이스와 같은 다양한 소스의 데이터를 결합하는 방법 시연.

이 프로젝트는 데이터베이스 시스템의 기본 메커니즘을 이해하기 위한 실용적인 학습 도구 역할을 합니다.

## 파일 구조

이 섹션은 `src/dbSystem` 디렉토리 내의 주요 Java 파일들과 프로젝트에서의 역할에 대해 설명합니다:

*   **`DbConst.java`**: 이 파일은 URL, 사용자 이름, 비밀번호와 같은 데이터베이스 연결 관련 상수를 저장합니다. 이를 통해 데이터베이스 구성을 중앙에서 관리할 수 있습니다.
*   **`FileUtil.java`**: 이 유틸리티 클래스는 파일 생성 등 파일 작업을 위한 메소드를 제공합니다. 이러한 유틸리티는 다른 클래스에서 데이터를 저장하는 텍스트 파일을 관리하는 데 사용됩니다.
*   **`Main.java`**: 애플리케이션의 진입점입니다. 사용자와 상호 작용하고, 명령을 처리하며, 데이터베이스 시스템의 여러 모듈 간 작업을 조정하는 핵심 로직을 포함합니다. 사용자 인터페이스를 처리하고 전체 워크플로우를 조정합니다.
*   **`Record.java`**: 이 클래스는 데이터 레코드의 구조를 정의합니다. 각 레코드가 포함할 필드, 저장 방식, 레코드 데이터 접근 및 조작 메소드를 지정합니다.

## 핵심 기능

이 시스템은 다음과 같은 주요 작업을 지원합니다:

*   **순차 파일(테이블) 생성:** 사용자는 새 테이블의 스키마를 정의하고, 열 이름과 해당 유형/길이를 지정할 수 있습니다. 이 스키마를 기반으로 시스템은 데이터를 순차적으로 저장하기 위한 텍스트 파일을 생성합니다. 동시에 해당 구조를 미러링하기 위해 MySQL 데이터베이스에 해당 테이블이 생성됩니다.
*   **레코드 삽입:** 새 레코드를 시스템에 추가할 수 있습니다. 이러한 레코드는 기본 키를 기준으로 정렬 순서를 유지하면서 해당 텍스트 파일에 삽입됩니다. 동일한 레코드가 해당 MySQL 테이블에도 삽입되어 두 저장 메커니즘 간의 데이터 일관성을 보장합니다.
*   **필드별 레코드 검색:** 시스템을 통해 사용자는 특정 필드의 값을 기준으로 텍스트 파일 내에서 레코드를 검색할 수 있습니다. 이를 통해 사용자 정의 기준에 따라 데이터를 선택적으로 검색할 수 있습니다.
*   **범위 검색 수행:** 사용자는 키 필드에 대해 범위 검색을 수행할 수 있습니다. 이 기능은 지정된 키 필드의 값이 주어진 범위 내에 있는 모든 레코드를 검색합니다(예: ID가 100에서 200 사이인 모든 레코드).
*   **정렬-병합 조인 수행:** 시스템은 정렬-병합 조인 알고리즘을 사용하여 기본 키를 기준으로 두 테이블(텍스트 파일로 표시)을 조인할 수 있습니다. 이 작업은 기본 키 값이 일치하는 두 파일의 레코드를 결합합니다. 또한 시스템은 비교 및 검증을 위해 MySQL 데이터베이스에서 동등한 SQL 조인 결과를 보여줍니다.

## 데이터 저장소

이 시스템은 사용자 정의 블록 기반 I/O 작업을 위한 텍스트 파일과 스키마 관리 및 SQL 기반 기능을 위한 MySQL 데이터베이스를 모두 활용하는 하이브리드 데이터 저장 방식을 사용합니다.

### 텍스트 파일 저장소

*   **블록 기반 시스템:** 텍스트 파일의 레코드는 블록 기반 시스템을 사용하여 관리됩니다. 각 블록은 고정된 크기입니다(예: 레코드 데이터의 경우 `Main.java`에서 주로 구성되는 40바이트. 헤더와 같은 다른 목적을 위해 블록 크기는 달라질 수 있음). 이 방식은 디스크 기반 시스템에서 데이터가 종종 처리되는 방식을 시뮬레이션합니다.
*   **헤더 블록:** 테이블을 나타내는 각 텍스트 파일에는 헤더 블록이 포함됩니다. 이 헤더는 일반적으로 첫 번째 실제 데이터 레코드의 오프셋과 같은 파일에 대한 메타데이터를 저장합니다. 이를 통해 시스템은 데이터의 시작 부분을 빠르게 찾을 수 있습니다.
*   **널 비트맵:** 레코드 내 필드의 널 값을 효율적으로 처리하기 위해 널 비트맵이 사용됩니다. 이 비트맵은 레코드의 어떤 필드가 널인지 나타내어 가변 길이 데이터 표현을 허용하고 공간을 절약합니다.
*   **정렬된 레코드:** 텍스트 파일 내의 레코드는 일반적으로 레코드의 첫 번째 필드(예: ID)인 지정된 검색 키를 기준으로 정렬된 상태로 유지됩니다. 이 정렬 순서는 효율적인 검색 및 정렬-병합 조인과 같은 작업에 중요합니다.

### MySQL 데이터베이스

*   **스키마 저장소:** MySQL 데이터베이스는 테이블의 실제 스키마(구조)를 저장하는 데 사용됩니다. 여기에는 열 이름, 데이터 유형 및 길이에 대한 정보가 포함됩니다.
*   **SQL 작업을 위한 레코드 복제:** 텍스트 파일에 삽입된 모든 레코드의 복사본이 MySQL 데이터베이스 내의 해당 테이블에도 유지됩니다. 이러한 복제를 통해 시스템은 복잡한 쿼리, 데이터 확인(예: `Main.java`에 표시된 것처럼 텍스트 파일 조인 결과를 SQL 조인과 비교) 및 기타 관계형 데이터베이스 작업에 SQL을 활용할 수 있습니다. 이 하이브리드 모델은 파일 구성에 대한 낮은 수준의 이해와 완전한 RDBMS의 강력한 기능을 모두 제공합니다.

## 구성 상수

`src/dbSystem/DbConst.java` 파일에는 시스템, 특히 MySQL 데이터베이스 상호 작용이 예상대로 작동하도록 올바르게 구성해야 하는 몇 가지 중요한 상수가 포함되어 있습니다.

*   **`DB_URL`**: 이 상수는 MySQL 데이터베이스의 연결 URL을 지정합니다. 일반적으로 호스트 이름, 포트 및 데이터베이스 이름(스키마)을 포함합니다. **이 URL이 MySQL 인스턴스를 가리키도록 올바르게 구성하는 것이 중요합니다.**
*   **`USER`**: 이 상수는 MySQL 데이터베이스로 인증하는 데 사용되는 사용자 이름을 정의합니다. **지정된 스키마에 대한 적절한 권한이 있는 유효한 사용자 이름이어야 합니다.**
*   **`PASS`**: 이 상수는 지정된 MySQL 사용자의 비밀번호를 정의합니다. **이 비밀번호가 구성된 사용자의 비밀번호와 일치하는지 확인하십시오.**
*   **`schema`**: 이 상수는 시스템이 사용할 MySQL의 데이터베이스(스키마) 이름을 지정합니다. `DB_URL`에도 스키마 이름이 포함될 수 있지만 이 상수는 프로그래밍 방식으로 데이터베이스를 참조하는 데 사용됩니다.
*   **`tableName`**: 이 상수는 기본 테이블 이름을 제공합니다. 그러나 시스템은 이 기본값에 의존하기보다는 "테이블 생성" 작업 중 사용자 입력을 기반으로 주로 테이블을 만들고 이름을 지정한다는 점에 유의해야 합니다.

`DB_URL`, `USER` 및 `PASS`를 올바르게 구성하는 것은 MySQL 데이터베이스에 대한 연결을 설정하는 데 필수적입니다. 올바른 자격 증명 및 연결 세부 정보가 없으면 MySQL과 관련된 모든 작업이 실패합니다. `schema` 상수는 시스템이 올바른 데이터베이스를 대상으로 하도록 보장하고 `tableName`은 대체 또는 기본값 역할을 하지만 동적 테이블 이름 지정이 애플리케이션의 표준 관행입니다.

## 사용 지침

### 사전 요구 사항

애플리케이션을 실행하기 전에 다음 사항을 확인하십시오:

1.  **Java Development Kit (JDK):** JDK 8 이상이 설치되어 있어야 합니다.
2.  **MySQL 서버:** MySQL 서버 인스턴스가 설치되어 실행 중이어야 합니다.
3.  **MySQL 데이터베이스 스키마:** MySQL 서버에 `src/dbSystem/DbConst.java`에 정의된 `schema` 상수와 일치하는 데이터베이스 스키마를 생성합니다 (예: `DbConst.java`의 값이 `db_system`인 경우 `db_system`).
4.  **MySQL 사용자 권한:** `DbConst.java`의 `USER` 및 `PASS` 상수로 지정된 MySQL 사용자는 앞서 언급한 스키마에 대한 전체 권한(CREATE, INSERT, SELECT 등)을 가지고 있어야 합니다.

### 프로그램 실행

1.  **컴파일:**
    *   터미널에서 `src` 디렉토리로 이동합니다.
    *   Java 컴파일러를 사용하여 Java 파일을 컴파일합니다:
        ```bash
        javac dbSystem/*.java
        ```
    *   또는 IntelliJ IDEA 또는 Eclipse와 같은 IDE로 프로젝트를 가져와 IDE의 빌드 도구를 사용하여 컴파일할 수 있습니다.

2.  **실행:**
    *   성공적으로 컴파일한 후 `src` 디렉토리에 있는지 확인합니다.
    *   `Main` 클래스를 실행합니다:
        ```bash
        java dbSystem.Main
        ```
    *   IDE를 사용하는 경우 일반적으로 IDE에서 직접 `Main.java` 파일을 실행할 수 있습니다.

### 메뉴와 상호 작용

애플리케이션을 시작하면 다음과 같은 메뉴가 표시됩니다:

```
Please enter a number for an option:
1. Create file
2. Insert record
3. Join query
```

각 옵션 사용 방법은 다음과 같습니다:

1.  **Create file (파일 생성):**
    *   이 옵션을 사용하면 새 테이블(순차 파일)을 정의할 수 있습니다.
    *   **형식:** `fileName,column1Name,column2Name,...,column1Length,column2Length,...`
    *   **예시:** `students,id,name,age,4,20,3`
        *   이렇게 하면 `students.txt`라는 파일과 해당 MySQL 테이블 `students`가 생성됩니다.
        *   테이블에는 `id`(길이 4), `name`(길이 20), `age`(길이 3)의 세 개의 열이 있습니다.
        *   지정된 첫 번째 열(`id`의 경우)이 기본/검색 키로 처리됩니다.

2.  **Insert record (레코드 삽입):**
    *   이 옵션을 사용하면 기존 테이블에 새 레코드를 삽입할 수 있습니다.
    *   프로그램은 먼저 삽입할 파일 이름(테이블 이름)을 묻습니다.
    *   그런 다음 레코드 값을 입력하라는 메시지가 표시됩니다.
    *   **값 형식:** `value1;value2;value3;...` (세미콜론으로 구분)
    *   **예시:**
        *   프로그램: `Enter file name:`
        *   사용자: `students`
        *   프로그램: `Enter record:`
        *   사용자: `101;Alice;22`
        *   이렇게 하면 ID가 `101`, 이름이 `Alice`, 나이가 `22`인 레코드가 `students` 테이블(텍스트 파일 및 MySQL 모두)에 삽입됩니다. 텍스트 파일의 레코드는 기본 키를 기준으로 정렬된 상태로 유지됩니다.

3.  **Join query (조인 쿼리):**
    *   이 옵션은 기본 키를 기준으로 두 테이블에 대해 정렬-병합 조인을 수행합니다.
    *   프로그램은 조인할 두 파일(테이블)의 이름을 묻습니다.
    *   **예시:**
        *   프로그램: `Enter first file name:`
        *   사용자: `students`
        *   프로그램: `Enter second file name:`
        *   사용자: `courses` (`courses`가 호환되는 기본 키로 생성된 다른 테이블이라고 가정)
    *   그러면 시스템은 텍스트 파일의 조인된 레코드를 표시하고 비교를 위해 MySQL 테이블에서 수행된 동등한 SQL 조인 쿼리 결과도 보여줍니다.

프로그램을 종료하려면 일반적으로 콘솔 창을 닫거나 IDE에서 실행을 중지하면 됩니다. `Main.java`의 프로그램 루프는 명시적으로 종료될 때까지 계속됩니다.

## 기여

이 프로젝트에 대한 기여를 환영합니다. 문제를 발견하거나 개선을 위한 제안 사항이 있으면 언제든지 이슈를 열거나 풀 리퀘스트를 제출해 주십시오.
